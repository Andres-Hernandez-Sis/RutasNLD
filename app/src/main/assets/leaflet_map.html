<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Leaflet Map</title>
    <!-- Incluye la biblioteca Leaflet -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <style>
        body{
            margin: 0;
            padding: 0;
        }

        #map{
            width: 100%;
            height: 100vh;
        }
    </style>
</head>
<body>
<div id="map" style="width: 100%; height: 900px;"></div>
<script>
        // Inicializacion un mapa de Leaflet
        var map = L.map('map').setView([27.4665175,-99.5266303], 13); // El segundo valor es el zoom.

        // Agrega una capa de MAPA BASE
        var osmLayer = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png');
        var osmHOT = L.tileLayer('https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png');
        var googleStreets = L.tileLayer('http://{s}.google.com/vt/lyrs=m&x={x}&y={y}&z={z}',{maxZoom: 20,subdomains:['mt0','mt1','mt2','mt3']});

        // Crea una capa de MARCADORES
        var markersLayer = L.layerGroup();


        // Agrega marcadores a la capa de marcadores
        L.marker([27.480925, -99.515360]).bindPopup('Marcador').addTo(markersLayer);
        L.marker([27.490000, -99.525000]).bindPopup('Otro marcador').addTo(markersLayer);

        // Agrega las capas al mapa
        osmLayer.addTo(map);
        osmHOT.addTo(map);
        googleStreets.addTo(map);

        // Crea un objeto de control de capas
        var baseLayers = {
        "GoogleStreet": googleStreets,
        "OpenStreetMapHT": osmHOT,
        "OpenStreetMap": osmLayer,
        };

        var overlays = {
            "Marcadores": markersLayer
        };

        // Agrega el control de capas al mapa
        L.control.layers(baseLayers, overlays, { collapsed: true }).addTo(map);

        var rutaCoordenadas1 = [
            [
            27.474748422982742,
             -99.52863080822446
          ],
          [

            27.481027013682777,
            -99.52875388559002
          ],
          [

            27.480999716236994,
            -99.52700003312248
          ],
          [

            27.48397509802473,
            -99.52706157180526
          ],
          [

            27.48389320785833,
            -99.51752307592648
          ],
          [

            27.48334727186078,
            -99.51749230658446,
          ]

        ];

        var ruta = L.polyline(rutaCoordenadas1, { color: 'blue', weight: 5 }).addTo(map);

        // Marcadores en los puntos de inicio y final
        L.marker(rutaCoordenadas1[0]).addTo(map).bindPopup('Inicio');
        L.marker(rutaCoordenadas1[rutaCoordenadas1.length - 1]).addTo(map).bindPopup('Fin');


         // Agrega la ruta GeoJSON al mapa
        var geojsonFeature = {
            "type": "FeatureCollection",
            "features": [
                {
                    "type": "Feature",
                    "properties": {},
                    "geometry": {
                        "type": "LineString",
                        "coordinates": [
                            [
            -99.51659494588012,
            27.453516607544685
          ],
          [
            -99.5153560997705,
            27.455864761120353
          ],
          [
            -99.51440353914472,
            27.457752263050764
          ],
          [
            -99.51205218488721,
            27.46194099761854
          ],
          [
            -99.50965354510409,
            27.46651319091147
          ],
          [
            -99.50808320475552,
            27.469381850873333
          ],
          [
            -99.50794250694493,
            27.469762030089882
          ],
          [
            -99.50774425093856,
            27.469881190469835
          ],
          [
            -99.5077506462936,
            27.4697904016206
          ],
          [
            -99.50672738948819,
            27.46977337870308
          ],
          [
            -99.50668708158803,
            27.47481016762933
          ],
          [
            -99.5037708122992,
            27.474787468135332
          ],
          [
            -99.50377794327497,
            27.477816086562626
          ],
          [
            -99.50372534592272,
            27.478866583877462
          ],
          [
            -99.50373174881763,
            27.48382912622857
          ],
          [
            -99.50378553056143,
            27.4849515921631
          ],
          [
            -99.50377610138241,
            27.48658651749355
          ],
          [
            -99.50373838242231,
            27.487537487195226
          ],
          [
            -99.50374600235924,
            27.489355818728455
          ],
          [
            -99.5034474499974,
            27.489355085343632
          ],
          [
            -99.50347888374898,
            27.491465861939645
          ],
          [
            -99.5035354641017,
            27.492853790059016
          ],
          [
            -99.50354489384192,
            27.49381016420064
          ],
          [
            -99.50507350299074,
            27.493793141387286
          ],
          [
            -99.50742150830708,
            27.493837753396235
          ],
          [
            -99.5098638167696,
            27.493892010833676
          ],
          [
            -99.50994868244285,
            27.49524337437822
          ],
          [
            -99.51017211328202,
            27.4970680137115
          ],
          [
            -99.50937372860989,
            27.497165599554464
          ],
          [
            -99.50890538484532,
            27.497229727346962
          ],
          [
            -99.508638208872,
            27.497285490614445
          ],
          [
            -99.50869164406707,
            27.495922070624403
          ],
          [
            -99.50869330511381,
            27.495280565932205
          ],
          [
            -99.50886022210663,
            27.493883015143695
          ],
          [
            -99.5099289259983,
            27.493905321132203
          ],
          [
            -99.51087229403964,
            27.493913687550304
          ],
          [
            -99.51404413445675,
            27.493959290105536
          ],
          [
            -99.51484566235318,
            27.49397602124894
          ],
          [
            -99.51580120936275,
            27.493992750726605
          ],
          [
            -99.51797032014332,
            27.49412101122344
          ],
          [
            -99.52094871659605,
            27.49419350673601
          ],
          [
            -99.52103987075148,
            27.49427436569478
          ],
          [
            -99.52103672750472,
            27.494703753653184
          ],
          [
            -99.5212284655558,
            27.49482643561943
          ],
          [
            -99.52374337691633,
            27.494401837347468
          ],
          [
            -99.52381567159135,
            27.494385107931947
          ],
          [
            -99.52390053925329,
            27.494376743223285
          ],
          [
            -99.52418874895969,
            27.49442810916608
          ],
          [
            -99.52490540921661,
            27.494634438365665
          ],
          [
            -99.5259426806414,
            27.49502757806752
          ],
          [
            -99.52708583461886,
            27.49509065469931
          ],
          [
            -99.52711107081129,
            27.490540356215888
          ],
          [
            -99.52715342611889,
            27.489608842621493
          ],
          [
            -99.52719941140393,
            27.489268258785216
          ],
          [
            -99.5272032694468,
            27.488943124659002
          ],
          [
            -99.52720575874818,
            27.48667036722594
          ],
          [
            -99.52698755689941,
            27.485572431275187
          ],
          [
            -99.52692674646686,
            27.485013924075176
          ],
          [
            -99.5269611648343,
            27.48486782642169
          ],
          [
            -99.52974848226638,
            27.484217202281783
          ],
          [
            -99.52975598702268,
            27.479973423350373
          ],
          [
            -99.52976434631647,
            27.47997914369506
          ],
          [
            -99.52976433557477,
            27.479946272082785
          ],
          [
            -99.53079496294252,
            27.479937597206415
          ],
          [
            -99.53172964109375,
            27.479918949180473
          ],
          [
            -99.5317372944101,
            27.47893607689936
          ],
          [
            -99.53178732144814,
            27.477961518862102
          ],
          [
            -99.53174403031872,
            27.47700389046898
          ],
          [
            -99.53177784010511,
            27.474310672812592
          ],
          [
            -99.53174411121175,
            27.473404338627574
          ],
          [
            -99.53175599256814,
            27.472478397312628
          ],
          [
            -99.52770355499722,
            27.47246556856362
          ],
          [
            -99.5277368952421,
            27.468307218758213
          ],
          [
            -99.5277621748006,
            27.46794940701389
          ],
          [
            -99.52940491194329,
            27.46793725947387
          ],
          [
            -99.53176357531525,
            27.467939011152595
          ],
          [
            -99.53183463044805,
            27.46517402166988
          ],
          [
            -99.53179908925087,
            27.463721351054616
          ],
          [
            -99.5317398637512,
            27.462433078199965
          ],
          [
            -99.53023069808634,
            27.462435331823613
          ],
          [
            -99.52984397852602,
            27.462476924720875
          ],
          [
            -99.52955491542056,
            27.462625965803113
          ],
          [
            -99.5294815069878,
            27.462530660663376
          ],
          [
            -99.52946105906425,
            27.46246211777006
          ],
          [
            -99.5296145123779,
            27.46143463673259
          ],
          [
            -99.5296093040589,
            27.46133794571442
          ],
          [
            -99.52916583418734,
            27.45975781350178
          ],
          [
            -99.52910755631638,
            27.459688864155268
          ],
          [
            -99.52888739547024,
            27.459562456909225
          ],
          [
            -99.52894135706165,
            27.45937667626707
          ],
          [
            -99.5290233777689,
            27.459286658745697
          ],
          [
            -99.52912567620612,
            27.459154991322492
          ],
          [
            -99.52953362130312,
            27.458511458898414
          ],
          [
            -99.53017131025085,
            27.457358625176198
          ],
          [
            -99.52654097868886,
            27.455793069606173
          ],
          [
            -99.5251510999563,
            27.455082966870762
          ],
          [
            -99.52127674414409,
            27.45336223307119
          ],
          [
            -99.52090864229768,
            27.453169403132165
          ],
          [
            -99.52068602102857,
            27.452961173037266
          ],
          [
            -99.52057771878978,
            27.45275294255005
          ],
          [
            -99.52015654341625,
            27.451375407884328
          ],
          [
            -99.51994565255893,
            27.450724989101104
          ],
          [
            -99.51980726636494,
            27.450468700172365
          ],
          [
            -99.5196508297978,
            27.45029250118759
          ],
          [
            -99.51943422531974,
            27.450137659423902
          ],
          [
            -99.51888068054325,
            27.449860011579162
          ],
          [
            -99.51868644900838,
            27.449786125401786
          ],
          [
            -99.5185913758682,
            27.449982475717277
          ],
          [
            -99.51830442784454,
            27.450428864587977
          ],
          [
            -99.51810113686405,
            27.450785293484103
          ],
          [
            -99.51798999046822,
            27.45101124581022
          ],
          [
            -99.51784133064847,
            27.451356388783594
          ],
          [
            -99.51778644406801,
            27.45152207188154
          ],
          [
            -99.51767235629926,
            27.4516355851637
          ],
          [
            -99.51659469082398,
            27.453515883536596
          ]
                        ]
                    }
                }
            ]
        };
        L.geoJSON(geojsonFeature, { color: 'purple', weight: 5 }).bindPopup('Ruta Mirador Panteon').addTo(map);

<!--        var userLocationMarker = null;-->
<!--        var destinationMarker = L.marker([-99.50532591390994,27.48046278124238], { draggable: true }).addTo(map);-->
<!--        destinationMarker.bindPopup("Destino", { className: 'red-popup' }).openPopup();-->
<!--        var initialPolyline = L.polyline([destinationMarker.getLatLng(), destinationMarker.getLatLng()], { color: 'blue' }).addTo(map);-->
<!--        initialPolyline.setLatLngs([e.latlng, destinationMarker.getLatLng()]);-->
<!--        destinationMarker.on('dragend', function (event) {-->
<!--            var newDestinationLatLng = event.target.getLatLng();-->
<!--            // Actualiza la lÃ­nea cuando el usuario mueve el marcador de destino-->
<!--            initialPolyline.setLatLngs([userLocationMarker.getLatLng(), newDestinationLatLng]);-->
<!--        });-->

// Agrega la ruta GeoJSON al mapa
    var geojsonFeature1 = {
        "type": "FeatureCollection",
        "features": [
            {
                "type": "Feature",
                "properties": {},
                "geometry": {
                    "type": "LineString",
                    "coordinates": [
                                    [
                                      -99.50895863767163,
                                      27.492104992983613
                                    ],
                                    [
                                      -99.51186835386265,
                                      27.492100669474524
                                    ],
                                    [
                                      -99.5118172970438,
                                      27.493902411505005
                                    ],
                                    [
                                      -99.52101233121263,
                                      27.494078129805644
                                    ],
                                    [
                                      -99.5212111338693,
                                      27.494806115496488
                                    ],
                                    [
                                      -99.5238759171978,
                                      27.494351684452283
                                    ],
                                    [
                                      -99.52599617003011,
                                      27.49502299567763
                                    ],
                                    [
                                      -99.53645065413342,
                                      27.49525349029834
                                    ],
                                    [
                                      -99.53652245788497,
                                      27.4905249630053
                                    ],
                                    [
                                      -99.5474376324369,
                                      27.49067923507272
                                    ],
                                    [
                                      -99.55050407528663,
                                      27.49093041928805
                                    ],
                                    [
                                      -99.55256571564496,
                                      27.49117644089972
                                    ],
                                    [
                                      -99.55451560344173,
                                      27.49099485197793
                                    ],
                                    [
                                      -99.55443818120209,
                                      27.49467239451984
                                    ],
                                    [
                                      -99.56761783311944,
                                      27.495011510706277
                                    ],
                                    [
                                      -99.565979519901,
                                      27.5011771408452
                                    ],
                                    [
                                      -99.56538879191426,
                                      27.503207395824717
                                    ],
                                    [
                                      -99.56563736063386,
                                      27.503298180320684
                                    ],
                                    [
                                      -99.5656773058169,
                                      27.503800857630196
                                    ],
                                    [
                                      -99.56880147345228,
                                      27.503774919329132
                                    ],
                                    [
                                      -99.56879560359326,
                                      27.5100263825246
                                    ],
                                    [
                                      -99.56525715475851,
                                      27.510035028134396
                                    ],
                                    [
                                      -99.56516942462164,
                                      27.511539353897803
                                    ],
                                    [
                                      -99.56888333373013,
                                      27.511556644878922
                                    ],
                                    [
                                      -99.56891730384254,
                                      27.51547055408743
                                    ],
                                    [
                                      -99.56472473179218,
                                      27.515531215170554
                                    ],
                                    [
                                      -99.56475397517096,
                                      27.51693172501247
                                    ]
                    ]
                }
            },
            {
                "type": "Feature",
                "properties": {},
                "geometry": {
                    "type": "LineString",
                    "coordinates": [
                                    [
                                      -99.56222929680104,
                                      27.516879854594706
                                    ],
                                    [
                                      -99.56232677473028,
                                      27.515470698911358
                                    ],
                                    [
                                      -99.56889290188491,
                                      27.51553986015118
                                    ],
                                    [
                                      -99.56894293532312,
                                      27.511536344557868
                                    ],
                                    [
                                      -99.56521927842226,
                                      27.51157957200678
                                    ],
                                    [
                                      -99.56519003504349,
                                      27.5100406643637
                                    ],
                                    [
                                      -99.56887470077264,
                                      27.51003201875433
                                    ],
                                    [
                                      -99.5688420179574,
                                      27.50375868976971
                                    ],
                                    [
                                      -99.56537180367259,
                                      27.50379327417481
                                    ],
                                    [
                                      -99.56530669319542,
                                      27.503216025050236
                                    ],
                                    [
                                      -99.56395174997766,
                                      27.50319873275835
                                    ],
                                    [
                                      -99.5641021360299,
                                      27.49871216752439
                                    ],
                                    [
                                      -99.5643629717484,
                                      27.494896142016316
                                    ],
                                    [
                                      -99.5544697598397,
                                      27.494699429501495
                                    ],
                                    [
                                      -99.55451542227749,
                                      27.491931461475758
                                    ],
                                    [
                                      -99.54129516396206,
                                      27.491688167510958
                                    ],
                                    [
                                      -99.53654592847893,
                                      27.491385519584398
                                    ],
                                    [
                                      -99.5364387027562,
                                      27.49336568185427
                                    ],
                                    [
                                      -99.5165873904407,
                                      27.49306326432655
                                    ],
                                    [
                                      -99.51185186130361,
                                      27.49306856624078
                                    ],
                                    [
                                      -99.51185186130361,
                                      27.494555830285265
                                    ],
                                    [
                                      -99.50876879506475,
                                      27.494539827918487
                                    ],
                                    [
                                      -99.50891501195865,
                                      27.492153277846015
                                    ]
                    ]
                }
            }
        ]
    };

        // Crea una capa GeoJSON para la ruta roja
        var redLayer = L.geoJSON(geojsonFeature1.features[0], { color: 'red' }).addTo(map);

        // Crea una capa GeoJSON para la ruta azul
        var blueLayer = L.geoJSON(geojsonFeature1.features[1], { color: 'blue' }).addTo(map);

        // Crea una capa GeoJSON para ambas rutas (roja y azul)
        var bothLayers = L.layerGroup([redLayer, blueLayer]);

        // Configura un control de capas para alternar entre las capas
        var baseLayers = {
            "Solo Rojo": redLayer,
            "Solo Azul": blueLayer,
            "Ambos": bothLayers
        };
        L.control.layers(baseLayers).addTo(map);
</script>
</body>
</html>
